!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).toggle=t()}(this,function(){"use strict";function e(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function t(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),o.push.apply(o,n)}return o}function o(o){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(i,!0).forEach(function(t){e(o,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):t(i).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(i,e))})}return o}function n(e){return function(e){if(Array.isArray(e)){for(var t=0,o=new Array(e.length);t<e.length;t++)o[t]=e[t];return o}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var i,r,l=function(e,t){var o;return function(){var n=this,i=arguments,r=function(){o=!1};o||(e.apply(n,i),o=!0,setTimeout(r,t))}},a=function(e,t){t&&"function"==typeof t||console.error("Must be a function");var o=window.matchMedia(e).matches,n=window.matchMedia(e);return n.addListener(t),t(n),o},s=function(e){return document.querySelector(e)},c=function(e){return document.querySelectorAll(e)},u=!1,v=!1,d=["mouseenter","mouseleave"];Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});var p=function(e){var t=window.getComputedStyle(e.value,null).getPropertyValue("transition-duration");return"drop"===e.type&&"0s"!==t},g=function(e,t){var o=e.nextElementSibling;if(!t)return o;for(;o;){if(o.matches(t))return o;o=o.nextElementSibling}},f=function(e,t,o){return e===t||e===s(t.getAttribute(o))},m=function(e,t,o,n,i,r,l,a){var s=!!t.hasAttribute(i)&&t.getAttribute(i),c=(null===r||!t.classList.contains(n))&&t.classList.contains(n);return{type:e,value:t,role:o||"default",active:c,isAnimateHeight:"drop"===e&&"height"===s,isAnimate:"drop"===e&&"default"===s,tabActive:"tab"===o&&c&&f(t,l,a)}},h=function(e,t,o,i,r,l,a,u,v){return[].slice.call(c("[".concat(a,'="').concat(i,'"]'))).filter(function(o){return o!==e&&o.classList.contains(t)}).reduce(function(i,a){var c=v?g(a,a.getAttribute(l)):s(a.getAttribute(l)),u=m("toggle",a,r,t,null,null,e,l),d=m("drop",c,r,t,o,null,e,l);return[].concat(n(i),[u,d])},[])},b=function(e,t,o,n,i,r,l,a){return i?[m("toggle",e,n,t,null,l)]:[].slice.call(c("[".concat(r,'="').concat(o,'"]'))).map(function(o){return m("toggle",o,n,t,null,l,e,r)})},y=function(e,t,o,n,i,r,l,a){return r?[m("drop",g(e,n),i,t,o,a)]:[].slice.call(c(n)).map(function(n){return m("drop",n,i,t,o,a,e,l)})},L=function(e,t,o){function n(e){e.target.removeEventListener("transitionend",n),l(e.target)}function i(e){e.target.removeEventListener("transitionend",i),r(e.target)}var r=function(e){e.classList.remove(t),e.classList.remove(o),e.style.height=null,u=!1},l=function(e){e.classList.remove(t),e.style.height=null,v=!1};return e.active?function(e){u=!0;var o=e.value.scrollHeight;window.requestAnimationFrame(function(){e.value.style.height=o+"px",e.value.classList.add(t);var n=p(e);window.requestAnimationFrame(function(){n?e.value.addEventListener("transitionend",i):r(e.value),e.value.style.height="0px"})})}(e):function(e){v=!0,e.value.classList.add(o),e.value.classList.add(t);var i=e.value.scrollHeight;e.value.style.height=i+"px",p(e)?e.value.addEventListener("transitionend",n):l(e.value)}(e)},w=function(e,t,o){var n=p(e);console.log("collapse ",e);function i(t){console.log("collapse ",t.target),e.value.removeEventListener("transitionend",i),e.value.classList.remove(o),u=!1}n?function(e){"tab"===e.role?(e.value.classList.remove(t),e.value.classList.remove(o)):(u=!0,e.value.classList.remove(t),e.value.addEventListener("transitionend",i))}(e):function(e){e.value.classList.remove(t),e.value.classList.remove(o),u=!1}(e)},A=function(e,t,o){function n(t){e.value.removeEventListener("transitionend",n),v=!1}p(e)?function(e){v=!0,window.requestAnimationFrame(function(){e.value.classList.add(o),window.requestAnimationFrame(function(){e.value.classList.add(t),e.value.addEventListener("transitionend",n)})})}(e):function(e){e.value.classList.add(o),e.value.classList.add(t),v=!1}(e)},E=function(e){if("toggle"!==e.type){e.value.setAttribute("style","position: absolute; visibility: hidden; display: block; pointer-events: none"),e.value.classList.remove("is--position-bottom","is--position-top","is--position-left","is--position-right");var t,o,n,i=(t=e.value,o=t.getBoundingClientRect(),(n={}).top=o.top<0,n.left=o.left<0,n.bottom=o.bottom>(window.innerHeight||document.documentElement.clientHeight),n.right=o.right>(window.innerWidth||document.documentElement.clientWidth),n.any=n.top||n.left||n.bottom||n.right,n.all=n.top&&n.left&&n.bottom&&n.right,n);e.value.removeAttribute("style"),i.top&&(e.value.classList.add("is--position-bottom"),e.value.classList.remove("is--position-top")),i.bottom&&(e.value.classList.add("is--position-top"),e.value.classList.remove("is--position-bottom")),i.left&&(e.value.classList.add("is--position-left"),e.value.classList.remove("is--position-right")),i.right&&(e.value.classList.add("is--position-right"),e.value.classList.remove("is--position-left"))}},k=function(e,t,o){return{item:e.querySelector(o),active:"mouseenter"===t||null}},O={selectorToggle:"[data-toggle]",selectorGlobal:"[data-toggle-global]",selectorGroup:"[data-toggle-group]",selectorValidate:"[data-toggle-validate]",selectorRole:"[data-toggle-role]",selectorBack:"[data-toggle-back]",selectorNext:"[data-toggle-next]",selectorAnimate:"[data-toggle-animate]",selectorHover:"[data-toggle-hover]",toggleActiveClass:"is--active",toggleErrorClass:"is--error",toggleCollapseClass:"is--collapsing",toggleShowClass:"is--show",onHover:!1,onnHoverMediaQuery:"(max-width: 992px)",stopVideo:!0,callbackOpen:!1,callbackClose:!1,callbackToggle:!1};return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o({},O,{},e),p=t.selectorToggle,g=t.selectorGlobal,f=t.selectorGroup,m=t.selectorValidate,C=t.selectorRole,S=t.selectorBack,j=t.selectorNext,x=t.selectorAnimate,P=t.selectorHover,H=t.toggleActiveClass,q=t.toggleErrorClass,T=t.toggleCollapseClass,M=t.toggleShowClass,V=t.onHover,B=t.onnHoverMediaQuery,D=(t.stopVideo,t.callbackOpen),G=t.callbackClose,N=t.callbackToggle,R=t.splitselectorToggle,F=void 0===R?p.replace(/\[|\]/g,""):R,I=t.splitselectorValidate,Q=void 0===I?m.replace(/\[|\]/g,""):I,W=t.splitselectorGroup,z=void 0===W?f.replace(/\[|\]/g,""):W,J=t.splitselectorAnimate,K=void 0===J?x.replace(/\[|\]/g,""):J,U=t.splitselectorHover,X=void 0===U?P.replace(/\[|\]/g,""):U,Y=t.splitselectorRole,Z=void 0===Y?C.replace(/\[|\]/g,""):Y,$=t.splitselectorBack,_=(void 0===$&&S.replace(/\[|\]/g,""),[]),ee=null,te=null,oe=null,ne=s("body"),ie=!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g),re=function(){le(),ie&&ne.classList.add("is--ios"),V&&(_=[].slice.call(c(P)),ee=l(ce,100),ue(),a(B,se)&&(oe=!0)),ae()},le=function(){ie&&ne.classList.remove("is--ios"),document.removeEventListener("click",ve,!1),V&&oe&&_.map(function(e){d.map(function(t){e.removeEventListener(t,pe)}),e.removeEventListener("keydown",ge)})},ae=function(){document.addEventListener("click",ve,!1)},se=function(e){var t=e.matches;!t||!1!==oe&&null!==oe||(oe=!0,ue()),t||!0!==oe&&null!==oe||(oe=!1,ue())},ce=function(e){null!==te&&te===e.type&&oe&&"touchstart"===te||!oe&&te===e.type||(te=oe?"touchstart":e.type,de(te),["mouseover"].map(function(e){document.removeEventListener(e,ee,!1)}))},ue=function(){["touchstart","mouseover"].map(function(e){document.addEventListener(e,ee,!1)})},ve=function(e){i=performance.now(),"mouseover"===te&&e.target.parentElement.hasAttribute(X)||(e.target.closest(p)||e.target.closest(S)?(e.preventDefault(),v||u||fe(e)):ye(e))},de=function(e){"touchstart"===e&&_.map(function(e){d.map(function(t){e.removeEventListener(t,pe)}),e.removeEventListener("keydown",ge)}),"mouseover"===e&&_.map(function(e){d.map(function(t){e.addEventListener(t,pe)}),e.addEventListener("keydown",ge)})},pe=function(e){if(e.target.matches(P)){i=performance.now(),e.stopPropagation();var t=k(e.target,e.type,p);fe(t)}},ge=function(e){13===e.keyCode&&(v||u||(e.preventDefault(),fe(e)))},fe=function(e){var t=e.target?e.target.closest(p)||e.target.closest(S).parentNode.parentNode.querySelector(p):e.item,o=e.active?e.active:null;N&&N(t);var l=t.getAttribute(F),a=t.getAttribute(z),s=t.getAttribute(Z),c=t.closest(j),u=a?h(t,H,K,a,s,F,z,0,c):[],v=b(t,H,l,s,c,F,o),d=y(t,H,K,l,s,c,F,o);[].concat(n(u),n(v),n(d)).forEach(function(e){var t=e.active,o=e.isAnimateHeight,n=e.isAnimate;if(!e.tabActive){if(t)if(be(e))return;o?L(e,T,H):n?e.active?w(e,M,H):A(e,M,H):e.active?he(e):me(e)}}),r=performance.now(),console.log("toggleItem -> "+(r-i)+" ms.")},me=function(e){D&&D(e),"tooltip"===e.role&&E(e),e.value.classList.add(H),"toggle"===e.type&&e.value.setAttribute("aria-expanded",!0),r=performance.now(),console.log("open -> "+(r-i)+" ms.")},he=function(e){G&&G(e),e.value.classList.remove(H),"toggle"===e.type&&e.value.setAttribute("aria-expanded",!1),r=performance.now(),console.log("close -> "+(r-i)+" ms.")},be=function(e){var t=!("drop"!==e.type||!e.value.hasAttribute(Q))&&e.value.querySelectorAll("[required]");if(!t)return!1;if(t){var o=0!==[].slice.call(t).filter(function(e){return!e.checkValidity()}).length&&o;return o?(o[0].focus(),o[0].classList.add(q),setTimeout(function(){var e=o[0].getBoundingClientRect().top;window.scrollBy({top:e,left:0,behavior:"smooth"})},250),!0):(t.forEach(function(e){return e.classList.contains(q)&&e.classList.remove(q)}),!1)}},ye=function(e){var t=[].slice.call(c("".concat(g,".").concat(H)));if(0!==t.length&&null===e.target.closest(t[0].getAttribute(F))){var o=t.map(function(e){return s("".concat(e.getAttribute(F),".").concat(H))});t.forEach(function(e){return e.classList.remove(H)}),o.forEach(function(e){e.classList.remove(H),e.classList.contains(M)&&e.classList.remove(M)})}};re()}});
