!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).toggle=t()}(this,(function(){"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function n(n){for(var o=1;o<arguments.length;o++){var r=null!=arguments[o]?arguments[o]:{};o%2?t(r,!0).forEach((function(t){e(n,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):t(r).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(r,e))}))}return n}function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var r=function(e,t){var n;return function(){var o=this,r=arguments,i=function(){n=!1};n||(e.apply(o,r),n=!0,setTimeout(i,t))}},i=function(e,t){t&&"function"==typeof t||console.error("Must be a function");var n=window.matchMedia(e).matches,o=window.matchMedia(e);return o.addListener(t),t(o),n},a=(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}),function(e){return document.querySelector(e)}),l=function(e){return document.querySelectorAll(e)},s=!1,c=!1,u=[],d=null,v=null,p=null,f=[],g=null,m=function(e){var t=e.code;return"ArrowDown"===t||"ArrowUp"===t||"Tab"===t||"Escape"===t||16===t},h=function(e){var t=e.matches;!t||!1!==p&&null!==p||(p=!0,b()),t||!0!==p&&null!==p||(p=!1,b())},y=function(e){return function(t){null!==v&&v===t.pointerType&&p&&"touch"===v||!p&&"mouse"===v||(v=p?"touch":t.pointerType,e(v),document.removeEventListener("pointerover",d,!1))}},b=function(){document.addEventListener("pointerover",d,!1)};function L(e,t,n,o){u=[].slice.call(l(e)),d=r(y(o),100),b(),i(t,n)&&(p=!0)}var w=function(e){var t=window.getComputedStyle(e.value,null),n=t.getPropertyValue("transition-duration"),o=t.getPropertyValue("transition-property");return{exist:"drop"===e.type&&"0s"!==n,animation:o}},E=function(e,t){var n=e.nextElementSibling;if(!t)return n;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}},A=function(e,t,n){return e===t||e===a(t.getAttribute(n))},k=function(e,t,n,o,r,i,a,l){var s=t.classList.contains(o),c=!!t.hasAttribute(l)&&t.hasAttribute(l);return{type:e,value:t,role:n||"default",active:s,isAnimate:"drop"===e&&c,eventType:r,tabActive:"tab"===n&&s&&A(t,i,a)}},C=function(e,t,n,r,i,s,c,u,d){return[].slice.call(l("[".concat(s,'="').concat(n,'"]'))).filter((function(n){return n!==e&&n.classList.contains(t)})).reduce((function(n,l){var s=u?E(l,l.getAttribute(i)):a(l.getAttribute(i)),v=k("toggle",l,r,t,c,e,i),p=k("drop",s,r,t,c,e,i,d);return[].concat(o(n),[v,p])}),[])},O=function(e,t,n,o,r,i,a,s){return r?[k("toggle",e,o,t,a,e,i)]:[].slice.call(l("[".concat(i,'="').concat(n,'"]'))).map((function(n){return k("toggle",n,o,t,a,e,i)}))},x=function(e,t,n,o,r,i,a,s){return r?[k("drop",E(e,n),o,t,a,e,i,s)]:[].slice.call(l(n)).map((function(n){return k("drop",n,o,t,a,e,i,s)}))},S=function(e,t,n,o,r){function i(t){e.value.removeEventListener("transitionend",i),e.value.classList.remove(n),s=!1}function a(t){e.value.removeEventListener("transitionend",a),c=!1,e.value.enterLocked=!1,f.length>0&&N(e)&&G(r)}o===q||o!==q&&!e.active?function(e){c=!0,e.value.removeAttribute("data-toggle-hidden",!0),window.requestAnimationFrame((function(){e.value.classList.add(n),window.requestAnimationFrame((function(){e.value.classList.add(t),e.value.addEventListener("transitionend",a)}))}))}(e):(o===H||o!==q&&e.active)&&function(e){"tab"===e.role?(e.value.classList.remove(t),e.value.classList.remove(n)):(e.value.setAttribute("data-toggle-hidden",!0),e.value.addEventListener("transitionend",i),e.value.classList.remove(t),s=!0)}(e)},j=function(e,t,n,o){function r(t){t.target.removeEventListener("transitionend",r),l(t.target),f.length>0&&N(e)&&G(o)}function i(e){e.target.removeEventListener("transitionend",i),a(e.target)}var a=function(e){e.classList.remove(t),e.classList.remove(n),e.style.height=null,s=!1},l=function(e){e.classList.remove(t),e.style.height=null,c=!1};return e.active?function(e){s=!0;var n=e.value.scrollHeight;e.value.setAttribute("data-toggle-hidden",!0),window.requestAnimationFrame((function(){e.value.style.height=n+"px",e.value.classList.add(t),window.requestAnimationFrame((function(){e.value.addEventListener("transitionend",i),e.value.style.height="0px"}))}))}(e):function(e){c=!0,e.value.classList.add(n),e.value.classList.add(t);var o=e.value.scrollHeight;e.value.style.height=o+"px",e.value.removeAttribute("data-toggle-hidden",!0),e.value.addEventListener("transitionend",r)}(e)},P=function(e){if("toggle"!==e.type){e.value.setAttribute("style","position: absolute; visibility: hidden; display: block; pointer-events: none"),e.value.classList.remove("is--position-bottom","is--position-top","is--position-left","is--position-right");var t,n,o,r=(t=e.value,n=t.getBoundingClientRect(),(o={}).top=n.top<0,o.left=n.left<0,o.bottom=n.bottom>(window.innerHeight||document.documentElement.clientHeight),o.right=n.right>(window.innerWidth||document.documentElement.clientWidth),o.any=o.top||o.left||o.bottom||o.right,o.all=o.top&&o.left&&o.bottom&&o.right,o);e.value.removeAttribute("style"),r.top&&(e.value.classList.add("is--position-bottom"),e.value.classList.remove("is--position-top")),r.bottom&&(e.value.classList.add("is--position-top"),e.value.classList.remove("is--position-bottom")),r.left&&(e.value.classList.add("is--position-left"),e.value.classList.remove("is--position-right")),r.right&&(e.value.classList.add("is--position-right"),e.value.classList.remove("is--position-left"))}},T=window.PointerEvent?{end:"pointerup",enter:"pointerenter",leave:"pointerleave"}:{end:"touchend",enter:"mouseenter",leave:"mouseleave"},q=T.enter,H=T.leave,D=[q,H],V=function(e,t,n){return{item:e.querySelector(n),type:t}},M=function(e,t,n){var o=!("drop"!==e.type||!e.value.hasAttribute(t))&&e.value.querySelectorAll("[required]");if(!o)return!1;if(o){var r=0!==[].slice.call(o).filter((function(e){return!e.checkValidity()})).length&&r;return r?(r[0].focus(),r[0].classList.add(n),setTimeout((function(){var e=r[0].getBoundingClientRect().top;window.scrollBy({top:e,left:0,behavior:"smooth"})}),250),!0):(o.forEach((function(e){return e.classList.contains(n)&&e.classList.remove(n)})),!1)}},B=function(e,t,n,o){if(f.forEach((function(e){return e.element.classList.contains(o)&&e.element.classList.remove(o)})),f.length>0&&!f[0].element.contains(t))for(var r=0;r<f.length;r++)f.pop();if(e.active){if(e.active)for(r=0;r<f.length;r++)if(f[r].element===e.value){1===f.length&&f[0].element.removeEventListener("keydown",n),f.splice(r,1);break}}else{var i={active:t,element:e.value};f.push(i)}},G=function(e){var t=f.length;f[t-1].element.classList.add(e),(g=[].slice.call(f[0].element.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, [tabindex="0"], [contenteditable], audio[controls], video[controls], summary')).filter((function(e){return function e(t){var n=window.getComputedStyle(t);return"none"!==n.display&&"hidden"!==n.visibility&&(!t.parentElement||e(t.parentElement))}(e)}))).unshift(f[0].active),1===t&&g[1].focus()},N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.eventType;return("click"===t||"keydown"===t)&&"drop"===e.type&&"tab"!==e.role&&"accordion"!==e.role},R={selectorToggle:"[data-toggle]",selectorGlobal:"[data-toggle-global]",selectorGroup:"[data-toggle-group]",selectorValidate:"[data-toggle-validate]",selectorRole:"[data-toggle-role]",selectorBack:"[data-toggle-back]",selectorNext:"[data-toggle-next]",selectorAnimate:"[data-toggle-animate]",selectorHover:"[data-toggle-hover]",toggleActiveClass:"is--active",toggleErrorClass:"is--error",toggleCollapseClass:"is--collapsing",toggleShowClass:"is--show",toggleCurrentClass:"is--current",onHover:!1,onnHoverMediaQuery:"(max-width: 992px)",stopVideo:!0,callbackOpen:!1,callbackClose:!1,callbackToggle:!1};return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n({},R,{},e),r=t.selectorToggle,i=t.selectorGlobal,d=t.selectorGroup,y=t.selectorValidate,b=t.selectorRole,E=t.selectorBack,A=t.selectorNext,k=t.selectorAnimate,T=t.selectorHover,F=t.toggleActiveClass,Q=t.toggleErrorClass,U=t.toggleCollapseClass,W=t.toggleShowClass,I=t.toggleCurrentClass,K=t.onHover,z=t.onnHoverMediaQuery,J=(t.stopVideo,t.callbackOpen),X=t.callbackClose,Y=t.callbackToggle,Z=t.splitselectorToggle,$=void 0===Z?r.replace(/\[|\]/g,""):Z,_=t.splitselectorValidate,ee=void 0===_?y.replace(/\[|\]/g,""):_,te=t.splitselectorGroup,ne=void 0===te?d.replace(/\[|\]/g,""):te,oe=t.splitselectorAnimate,re=void 0===oe?k.replace(/\[|\]/g,""):oe,ie=t.splitselectorHover,ae=void 0===ie?T.replace(/\[|\]/g,""):ie,le=t.splitselectorRole,se=void 0===le?b.replace(/\[|\]/g,""):le,ce=t.splitselectorBack,ue=(void 0===ce&&E.replace(/\[|\]/g,""),a("body")),de=!!navigator.userAgent.match(/(iPad|iPhone|iPod)/g),ve=function(){pe(),de&&ue.classList.add("is--ios"),K&&L(T,z,h,he),fe()},pe=function(){de&&ue.classList.remove("is--ios"),document.removeEventListener("click",ge,!1),document.removeEventListener("keydown",be,!1),K&&p&&u.map((function(e){D.map((function(t){e.removeEventListener(t,me)}))}))},fe=function(){document.addEventListener("click",ge,!1),document.addEventListener("keydown",be,!1)},ge=function(e){"mouseover"===v&&e.target.parentElement.hasAttribute(ae)||(e.target.closest(r)||e.target.closest(E)?(e.preventDefault(),c||s||Le(e)):Ce(e))};function me(e){if(e.target.matches(T)&&(e.type===q&&(this.enterLocked=!0),this.enterLocked||e.type!==q)){var t=V(e.target,e.type,r);Le(t)}}var he=function(e){"touch"===e&&u.map((function(e){e.removeEventListener(q,me,!1),e.removeEventListener(H,me,!1)})),"mouse"===e&&u.map((function(e){e.addEventListener(q,me,!1),e.addEventListener(H,me,!1)}))},ye=function(e){return!e.target.closest(r)||!e.target.closest(T)||"Enter"!==e.code},be=function(e){c||s||ye(e)&&!m(e)||(ye?m(e)&&f.length>0&&ke(e):(e.preventDefault(),Le(e)))},Le=function(e){var t=e.target?e.target.closest(r)||e.target.closest(E).parentNode.parentNode.querySelector(r):e.item,n=!!e.type&&e.type;Y&&Y(t);var i=t.getAttribute($),a=t.getAttribute(ne),l=t.getAttribute(se),s=t.closest(A),c=a?C(t,F,a,l,$,ne,n,s,re):[],u=O(t,F,i,l,s,$,n),d=x(t,F,i,l,s,$,n,re),v=[].concat(o(c),o(u),o(d));if(!u[0].tabActive){var p=v.filter((function(e){return e.active&&"drop"===e.type&&e.value.hasAttribute(ee)}));if(p)if(M(p,ee,Q))return;var f=!0,g=!1,m=void 0;try{for(var h,y=v[Symbol.iterator]();!(f=(h=y.next()).done);f=!0){var b=h.value;we(b,U,F,n,t)}}catch(e){g=!0,m=e}finally{try{f||null==y.return||y.return()}finally{if(g)throw m}}}},we=function(e,t,n,o,r){var i=e.isAnimate,a=w(e),l=a.exist,s=a.animation.match(/height/gi);N(e,o)&&B(e,r,ke,I),i&&s?j(e,t,n,I):i&&l?S(e,W,n,o,I):e.active?Ae(e):Ee(e)},Ee=function(e){J&&J(e),"tooltip"===e.role&&P(e),e.value.classList.add(F),"toggle"===e.type&&e.value.setAttribute("aria-expanded",!0),"drop"===e.type&&e.value.removeAttribute("data-toggle-hidden",!0),f.length>0&&N(e)&&G(I)},Ae=function(e){X&&X(e),e.value.classList.remove(F),"toggle"===e.type&&e.value.setAttribute("aria-expanded",!1),"drop"===e.type&&e.value.setAttribute("data-toggle-hidden",!0)},ke=function(e){var t={item:f[0].active,type:e.type},n=g[1],o=g[g.length-1];"Tab"===e.code?e.shiftKey?document.activeElement===n&&Le(t):document.activeElement===o&&Le(t):"ArrowDown"===e.code&&document.activeElement===n?(e.preventDefault(),o.focus()):"ArrowUp"===e.code&&document.activeElement===o?(e.preventDefault(),n.focus()):"Escape"===e.code&&(g[0].focus(),Le(t))},Ce=function(e){var t=[].slice.call(l("".concat(i,".").concat(F)));if(0!==t.length&&null===e.target.closest(t[0].getAttribute($))){var n=t.map((function(e){return a("".concat(e.getAttribute($),".").concat(F))}));t.forEach((function(e){return e.classList.remove(F)})),n.forEach((function(e){null!==e&&(e.classList.remove(F),e.classList.contains(W)&&e.classList.remove(W))}))}};ve()}}));
